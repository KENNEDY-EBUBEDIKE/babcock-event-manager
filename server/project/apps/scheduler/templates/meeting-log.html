{% extends 'blank.html' %}
{% block title %}
	<title>BABCOCK | Meeting Log</title>
{% endblock %}

{% block content %}
{% load static %}
{% csrf_token %}

<!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        MEETING LOG
        <small>TimeLine</small>
      </h1>
      <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Meeting Log</li>
      </ol>
    </section>

    <!-- Main content -->
    <section class="content">

      <!-- row -->
      <div class="row">
        <div class="col-md-12">
          <!-- The time line -->
          <ul class="timeline">


            {% for event in events %}
                <!-- New Date -->
                <li class="time-label">
                      <span class="bg-red">
                        {{event.actual_start_datetime.date}}
                      </span>
                </li>

                <!-- timeline item Start-->
                <li>
                    {% if event.event_type == "physical"  %}
                        <i class="fa fa-calendar bg-blue"></i>
                    {% elif event.event_type == "virtual" %}
                        <i class="fa fa-comments bg-yellow"></i>
                    {% endif %}

                  <div class="timeline-item">
                    <span class="time"><i class="fa fa-clock-o"></i> {{event.actual_start_datetime.time}}</span>

                    {% if event.has_poll  %}
                      <h1 class="card text-center"><b><strong>POLL</strong></b></h1>
                    {% endif  %}

                      <h3 class="timeline-header">
                        <a href="#">{{event.title}}</a>
                        {% if event.event_type == "physical"  %}
                            <span class="bg bg-warning" style="padding: 5px">{{event.event_type}} Event</span>
                        {% elif event.event_type == "virtual" %}
                            <span class="bg bg-primary" style="padding: 5px">{{event.event_type}} Event</span>
                        {% endif %}

                    </h3>

                    <div class="timeline-body">
                        <strong> {{event.description}}</strong>
                        <div style="font-size: 100%; margin-top: 20px">
                            {% if event.event_type == "physical"  %}
                                <span class="text-bold">VENUE:: </span> <span>{{event.physical_venue.name}}</span><br>
                                <span class="text-bold">CAPACITY:: </span> <span>{{event.physical_venue.capacity}}</span>
                            {% endif %}
                        </div>
                    </div>


                    <div class="timeline-footer">
                        {% if event.event_type == "physical"  %}
                            <a target="_blank" href="https://www.google.com/maps/search/?api=1&query={{event.physical_venue.coordinate}}" class="btn btn-primary btn-xs">View Venue On Map</a>
                        {% elif event.event_type == "virtual" %}
                            <a target="_blank" href="{{event.meeting_link}}" class="btn btn-warning btn-flat btn-xs">Join the Virtual Meet</a>
                        {% endif %}

                        {% if event.has_poll  %}
                            <a onclick="answerPoll({{event.id}}, 'No')" class="btn btn-danger btn-xs">Decline</a>
                            <a onclick="answerPoll({{event.id}}, 'Maybe')" class="btn btn-default btn-xs">Maybe</a>
                            <a onclick="answerPoll({{event.id}}, 'Yes')" class="btn btn-success btn-xs">Attend</a>
                        {% endif  %}
                    </div>
                  </div>
                </li>
                <!-- END timeline item -->


            {% endfor  %}


            <!-- New Date -->
            <li class="time-label">
                  <span class="bg-red">
                    17 March. 2023
                  </span>
            </li>

            <!-- timeline item Start-->
            <li>
              <i class="fa fa-calendar bg-blue"></i>

              <div class="timeline-item">
                <span class="time"><i class="fa fa-clock-o"></i> 12:05 PM</span>

                <h3 class="timeline-header"><a href="#">Chemistry Department</a> Freshers Event</h3>

                <div class="timeline-body">
                  <strong> This is an event scheduled for all fresh students admitted into the chemistry department.
                  Please Endeavor to attend</strong>
                </div>
                <div class="timeline-footer">
                  <a class="btn btn-primary btn-xs">View Venue On Map</a>
                  <a class="btn btn-danger btn-xs">Decline</a>
                </div>
              </div>
            </li>
            <!-- END timeline item -->

            <!-- timeline item -->
            <li>
              <i class="fa fa-comments bg-yellow"></i>

              <div class="timeline-item">
                <span class="time"><i class="fa fa-clock-o"></i> 01:00 PM</span>

                <h3 class="timeline-header"><a href="#">SENATE BUSINESS COMMITTEE</a> End Of Semester Meeting</h3>

                <div class="timeline-body">
                  <strong> SBC Meeting for the distinguished members of the senate!</strong><br>
                  Attendance is Mandatory for all members.
                  Please be punctual.
                </div>
                <div class="timeline-footer">
                  <a class="btn btn-warning btn-flat btn-xs">Join the Virtual Meet</a>
                </div>
              </div>
            </li>
            <!-- END timeline item -->




            <!-- New Date -->
            <li class="time-label">
                  <span class="bg-green">
                    25 March. 2023
                  </span>
            </li>
            <!-- /.timeline-label -->
            <!-- timeline item -->
            <li>
              <i class="fa fa-check bg-purple"></i>

              <div class="timeline-item">
                <span class="time"><i class="fa fa-clock-o"></i> 3:00 PM</span>

                <h1 class="card text-center"><b><strong>POLL</strong></b></h1>

                <h3 class="timeline-header"><a href="#">Christian Students Society</a> Mid Semester Event</h3>

                <div class="timeline-body">
                  <img src="{% static 'images/babcock-logo.png' %}" alt="..." width="10%" class="margin">
                </div>
                <div class="timeline-footer">
                  <a class="btn btn-primary btn-xs">View Venue On Map</a>
                  <a class="btn btn-danger btn-xs">Decline</a>
                  <a class="btn btn-success btn-xs">Attend</a>
                </div>
              </div>
            </li>
            <!-- END timeline item -->
            <!-- timeline item -->
            <li>
              <i class="fa fa-video-camera bg-maroon"></i>

              <div class="timeline-item">
                <span class="time"><i class="fa fa-clock-o"></i> 10:00 PM</span>

                <h3 class="timeline-header"><a href="#">STUDENT AFFAIRS DIVISION</a> Invitation to Join a Youtube Live Event</h3>

                <div class="timeline-body">
                  <div class="embed-responsive embed-responsive-16by9">

                    <iframe width="560" height="315" src="https://www.youtube.com/embed/L2SfNcZuntw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

                  </div>
                </div>
                <div class="timeline-footer">
                  <a href="#" class="btn btn-xs bg-maroon">See comments</a>
                </div>
              </div>
            </li>
            <!-- END timeline item -->
            <!-- timeline time label -->
            <li class="time-label">
                  <span class="bg-yellow">
                    01 April. 2023
                  </span>
            </li>
            <!-- /.timeline-label -->
            <!-- timeline item -->
            <li>
              <i class="fa fa-calendar bg-blue"></i>

              <div class="timeline-item">
                <span class="time"><i class="fa fa-clock-o"></i> 12:05 PM</span>

                <h3 class="timeline-header"><a href="#">FACULTY OF ARTS</a> Orientation Event</h3>

                <div class="timeline-body">
                  <strong> This is an event scheduled for all staff and students of Law Faculty.
                  Please Endeavor to attend</strong>
                </div>
                <div class="timeline-footer">
                  <a class="btn btn-primary btn-xs">View Venue On Map</a>
                  <a class="btn btn-danger btn-xs">Decline</a>
                </div>
              </div>
            </li>
            <!-- END timeline item -->

            <!-- timeline item -->
            <li>
              <i class="fa fa-comments bg-yellow"></i>

              <div class="timeline-item">
                <span class="time"><i class="fa fa-clock-o"></i> 01:00 PM</span>

                <h3 class="timeline-header"><a href="#">MATRICULATION CEREMONY</a> For 2022/2023 Academic Session</h3>

                <div class="timeline-body">
                  <strong> Matriculation for the new Admitted students of the school!</strong><br>
                  Attendance is Mandatory for all UTME and DE Students.
                  Please be punctual.
                </div>
                <div class="timeline-footer">
                  <a class="btn btn-warning btn-flat btn-xs">View Venue On Map</a>
                </div>
              </div>
            </li>
            <!-- END timeline item -->
            <li>
              <i class="fa fa-clock-o bg-gray"></i>
            </li>
          </ul>
        </div>
        <!-- /.col -->
      </div>
      <!-- /.row -->

    </section>
    <!-- /.content -->

{% endblock %}

{% block extra_script %}
  <script>
      const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
  </script>

    <script>
        function answerPoll(id, answer) {
            $.ajax({
            url: "/api/scheduler/poll/",
            type: 'POST',
            data: {
                'id': id,
                'answer': answer,
            },
            dataType: "json",
            headers: {'X-CSRFToken': csrftoken},
            mode: 'same-origin',
            success: function (response) {
                if (response.success) {
                    toastr["success"](response.message,"SUCCESS!")
                } else {
                    toastr["error"](response.message,"ERROR!")
                }
            },
        })
        }
    </script>

{% endblock %}